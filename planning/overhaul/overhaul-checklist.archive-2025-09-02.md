# Locus Overhaul Checklist Archive (Snapshot 2025-09-02)

This file is a historical snapshot of all tasks completed prior to cleanup. Active/open items now live only in `overhaul-checklist.md`.

Legend (original phases):
P1 Core | P2 Workflows | P3 UI | P4 Advanced | P5 Perf & GA

---

## 1. Syntax & Grammar Coherence (Completed)
- (P1) Reserve structural keywords (`else`, `elseif`, `guard`, `in`)
- (P1) Disallow optional list type syntactically
- (P1) Early parse error for list optionality (removed validator path)
- (P1) Formalize `else` branch keyword
- (P2) Structured workflow grammar (trigger, retry, concurrency)
- (P3) Style override block (`style_override`) replaces sanitization
- (P3) Array shorthand `Type[]` + dual support w/ deprecation for `list of`
- (P4) Standardize `on load` canonical form

## 2. Naming & Consistency (Completed)
- (P1) Enforce snake_case reserved keywords
- (P1) Name validation (PascalCase recommendation)
- (P4) Normalize workflow step names

## 3. Type System & Validation (Completed)
- (P2) New primitive tokens: BigInt, Float, UUID, Email, URL
- (P2) Nullable vs optional distinction (syntax & generator provisional)
- (P2) Restrict default function calls (whitelist)
- (P2) Relation policies + Prisma mapping
- (P2) Cross-block reference validation (actions)
- (P2) Structured retry config (duration parsing, ranges)
- (P3) UI expression parsing everywhere (expression AST + validation)

## 4. Error Reporting Upgrades (Completed)
- (P1) Error code catalog
- (P1) Keyword suggestion (Levenshtein)
- (P2) Structured workflow section error spans
- (P3) UI expression errors with codeframes (initial)
- (P4) Deprecation warnings include removal version & rewrite suggestion
- (P4) Suggested fix snippet for attribute migration
- (P5) `--explain <code>` command

## 5. Workflow System Maturation (Completed)
- (P2) Trigger DSL + webhook validation
- (P2) Stable step IDs
- (P2) Formal step schema objects
- (P2) Retry config validation
- (P3) New step types scaffolds (`parallel`, `queue_publish`, `db_tx`)
- (P4) Plugin-defined step kinds
- (P5) Execution tracing hooks

## 6. UI / Component Model (Completed)
- (P3) Slot syntax + React generation + tests
- (P3) Control flow directive decisions implemented
- (P3) Event validation
- (P3) Generalized bindings
- (P3) Expression AST for dynamic attributes
- (P4) Component prop inference (initial heuristic)

## 7. Extensibility & Plugins (Completed)
- (P4) Capability registry scaffold
- (P4) Lifecycle hooks (parse/validate/generate/run)
- (P4) Versioned plugin API handshake
- (P5) Dynamic plugin loading perf cache (stub)
- (P4) `--explain` integration
- (P4) Incremental build diff report (basic)
- (P2) Canonical field ordering decision
- (P2) Deterministic design token ordering
- (P4) Migration guide stubs (annotations & UI directives)
- (P3) Output hash baseline CI test
- (P1) Roadmap doc published
- (P2) HTTPS validation for http_request
- (P2) Webhook secret reference validation
- (P3) Email step sanitization
- (P3) Template path restriction
- (P4) Static taint analysis placeholder

## 10. Performance & Scalability (Completed)
- (P2) Block-level content hashing
- (P3) Worker-thread parallel parsing scaffold
- (P3) Expression AST caching
- (P4) Memory profiling smoke harness
- (P4) Baseline memory threshold adjustment tracking

## 11. Tooling & CLI UX (Completed)
- (P1) `locus check`
- (P3) `locus format`
- (P4) `--explain <code>`
- (P5) `locus doctor` basics

## 12. Migration & Versioning (Completed)
- (P1) Feature flag infrastructure
- (P2) `workflows.v2` flag
- (P3) Deprecation aggregation system
- (P4) Initial removal schedule emission (baseline)

## 13. Backwards Compatibility (Completed)
- (P1) Deprecation warning scaffolding
- (P2) Dual attribute parsing (paren + @)
- (P3) `suppressDeprecated` config

## 14. Testing Enhancements (Completed)
- (P1) Parser fuzz tests (entities)
- (P2) Workflow step fuzz tests
- (P2) Output determinism (double build) initial
- (P2) Design token & entity determinism partial tests
- (P3) UI grammar property fuzz scaffold
- (P3) Performance baseline (parse time/memory)
- (P4) Error suggestion tests

## 15. Documentation & Discoverability (Completed)
- (P1) Quick reference cheat sheet
- (P2) Autogenerated grammar spec
- (P2) Error catalog generation (initial)
- (P3) Structured workflows migration guide stub
- (P4) Annotations & UI directives migration guide stub
- (P5) Plugin authoring guide & examples

## 16. Implementation Ordering Verification (Completed / Partial)
- (P2) Backlog review after structured workflows

## 17. Success Criteria Tracking (Completed)
- (P1) Metrics collection harness
- (P2) Precise-span coverage CI job
- (P3) Deprecation usage counts
- (P4) Plugin API stability stub metric

## 18. Risk Mitigation (Completed Partials)
- (P2) Complexity acceptance gate template

---

### Notes
- Active tasks and future work removed from this archive remain in the main checklist.
- For provenance, consult git history of `overhaul-checklist.md` prior to commit introducing this archive.

End of archive.
